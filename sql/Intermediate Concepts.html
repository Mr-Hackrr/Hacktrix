<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intermediate SQL - TechyVia</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <link rel="stylesheet" href="style.css"> <!-- Assuming your CSS file is named styles.css -->
</head>
<body>
    <!-- Header Bar -->
    <header class="header-bar">
        <span class="brand-name">TechyVia</span>
        <nav class="navbar">
            <ul class="nav-links">
                <li><a href="#about" class="nav-link">About</a></li>
                <li><a href="#exercise" class="nav-link">Exercise</a></li>
                <li><a href="#project" class="nav-link">Project</a></li>
                <li><a href="#contact" class="nav-link">Contact Us</a></li>
            </ul>
        </nav>
        <div class="toggle-menu" id="toggle-menu">☰</div>
    </header>

    <!-- Sidebar -->
    <div id="sideMenu" class="sideMenu" role="navigation" aria-label="Sidebar Navigation">
        <a href="#" class="closebtn" aria-label="Close sidebar">×</a>
        <nav class="sidebar-nav">
            <ul class="sidebar-links">
                <li class="sidebar-link"><a href="#joins" tabindex="0">Joins</a></li>
                <li class="sidebar-link"><a href="#group-by" tabindex="0">GROUP BY</a></li>
                <li class="sidebar-link"><a href="#having" tabindex="0">HAVING</a></li>
                <li class="sidebar-link"><a href="#indexing-constraints" tabindex="0">Indexing</a></li>
                <li class="sidebar-link"><a href="#constraints" tabindex="0">constraints</a></li>
                <li class="sidebar-link"><a href="#views-stored-procedures" tabindex="0">Views and Stored Procedures</a></li>
                <li class="sidebar-link"><a href="#database-design" tabindex="0">Database Design</a></li>
                <li class="sidebar-link"><a href="#subqueries" tabindex="0">Subqueries</a></li>
            </ul>
        </nav>
    </div>

    <!-- Content -->
    <div id="content">
        <h1>Intermediate SQL</h1>
        <!-- Content will go here -->

 <!-- Intermediate SQL Content: Joins -->
 <section id="joins">
    <h2>SQL Joins: Combining Data</h2>
    <p>
        SQL Joins are used to retrieve data from multiple tables based on related columns. They are essential for answering questions that involve relationships between datasets.
    </p>

    <h3>Why Use Joins?</h3>
    <ul>
        <li>To combine data from multiple sources into a single result set.</li>
        <li>To analyze relationships between datasets, such as customers and their orders.</li>
        <li>To ensure meaningful data retrieval for complex queries.</li>
    </ul>

    <h3>Types of Joins</h3>
    <ul>
        <li><strong>INNER JOIN</strong> - Retrieves matching rows from both tables.</li>
        <li><strong>LEFT JOIN</strong> - Includes all rows from the left table and matching rows from the right table.</li>
        <li><strong>RIGHT JOIN</strong> - Includes all rows from the right table and matching rows from the left table.</li>
        <li><strong>FULL OUTER JOIN</strong> - Combines all rows from both tables, filling unmatched rows with NULLs.</li>
    </ul>

    <hr>

    <!-- INNER JOIN -->
    <div class="join-section">
        <h3>INNER JOIN</h3>
        <p>
            An <strong>INNER JOIN</strong> retrieves rows with matching values in both tables. It excludes rows that do not have matches in the other table.
        </p>

        <h3>Example Scenario</h3>
        <p>Consider two tables:</p>

        <div class="example-tables">
            <div class="table-wrapper" style="display: inline-block; width: 45%; margin-right: 5%;">
                <h4>Customers Table</h4>
                <table class="data-table compact-table">
                    <thead>
                        <tr>
                            <th>Customer ID</th>
                            <th>Customer Name</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>John Doe</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Jane Smith</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>Emily Johnson</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="table-wrapper" style="display: inline-block; width: 45%;">
                <h4>Orders Table</h4>
                <table class="data-table compact-table">
                    <thead>
                        <tr>
                            <th>Order ID</th>
                            <th>Customer ID</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>101</td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td>102</td>
                            <td>2</td>
                        </tr>
                        <tr>
                            <td>103</td>
                            <td>4</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <h3>Query</h3>
        <div class="code-box">
            <pre><code>SELECT customers.customer_name, orders.order_id
FROM customers
INNER JOIN orders
ON customers.customer_id = orders.customer_id;</code></pre>
        </div>

        <h3>Result</h3>
        <table class="data-table compact-table" style="width: 50%; margin: 0 auto;">
            <thead>
                <tr>
                    <th>Customer Name</th>
                    <th>Order ID</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>John Doe</td>
                    <td>101</td>
                </tr>
                <tr>
                    <td>Jane Smith</td>
                    <td>102</td>
                </tr>
            </tbody>
        </table>

        <h3>Visual Representation</h3>
        <div class="joins-visual" style="text-align: center;">
            <svg viewBox="0 0 300 150" xmlns="http://www.w3.org/2000/svg" class="join-diagram" style="width: 80%; max-width: 300px; height: auto;">
                <circle cx="100" cy="75" r="60" fill="#3498db" fill-opacity="0.6" />
                <circle cx="200" cy="75" r="60" fill="#e74c3c" fill-opacity="0.6" />
                <text x="140" y="80" font-size="12" fill="#fff" text-anchor="middle">Matching Rows</text>
            </svg>
            <p>
                The overlapping area shows rows where <strong>Customer ID</strong> matches between the Customers and Orders tables.
            </p>
        </div>

        <h3>Explanation</h3>
        <p>
            The query retrieves orders that have matching customer IDs in the Customers table. For example:
        </p>
        <ul>
            <li>John Doe (Customer ID 1) placed Order 101.</li>
            <li>Jane Smith (Customer ID 2) placed Order 102.</li>
        </ul>
    </div>
    <div class="join-section">
        <h3>LEFT JOIN</h3>
        <p>
            A <strong>LEFT JOIN</strong> retrieves all rows from the left table and the matching rows from the right table. Rows from the left table without matches in the right table will have NULLs for the right table's columns.
        </p>
    
        <h3>Example Scenario</h3>
        <p>Consider the same two tables:</p>
        <div class="example-tables">
            <div class="table-wrapper" style="display: inline-block; width: 45%; margin-right: 5%;">
                <h4>Customers Table</h4>
                <table class="data-table compact-table">
                    <thead>
                        <tr>
                            <th>Customer ID</th>
                            <th>Customer Name</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>1</td><td>John Doe</td></tr>
                        <tr><td>2</td><td>Jane Smith</td></tr>
                        <tr><td>3</td><td>Emily Johnson</td></tr>
                    </tbody>
                </table>
            </div>
    
            <div class="table-wrapper" style="display: inline-block; width: 45%;">
                <h4>Orders Table</h4>
                <table class="data-table compact-table">
                    <thead>
                        <tr>
                            <th>Order ID</th>
                            <th>Customer ID</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>101</td><td>1</td></tr>
                        <tr><td>102</td><td>2</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    
        <h3>Query</h3>
        <div class="code-box">
            <pre><code>SELECT customers.customer_name, orders.order_id
    FROM customers
    LEFT JOIN orders
    ON customers.customer_id = orders.customer_id;</code></pre>
        </div>
    
        <h3>Result</h3>
        <table class="data-table compact-table" style="width: 50%; margin: 0 auto;">
            <thead>
                <tr>
                    <th>Customer Name</th>
                    <th>Order ID</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>John Doe</td><td>101</td></tr>
                <tr><td>Jane Smith</td><td>102</td></tr>
                <tr><td>Emily Johnson</td><td>NULL</td></tr>
            </tbody>
        </table>
    
        <h3>Visual Representation</h3>
        <div class="joins-visual" style="text-align: center;">
            <svg viewBox="0 0 300 150" xmlns="http://www.w3.org/2000/svg" class="join-diagram" style="width: 80%; max-width: 300px; height: auto;">
                <circle cx="100" cy="75" r="60" fill="#3498db" fill-opacity="0.6" />
                <circle cx="200" cy="75" r="60" fill="#e74c3c" fill-opacity="0.2" />
                <text x="120" y="80" font-size="12" fill="#fff" text-anchor="middle">Left Rows</text>
            </svg>
            <p>
                The left circle includes all rows from the Customers table, with matches from the Orders table included in the overlap.
            </p>
        </div>
    
        <h3>Explanation</h3>
        <p>
            This query retrieves all customers, including those who have not placed any orders. For example, Emily Johnson has no orders, so her row has <strong>NULL</strong> for the Order ID.
        </p>
    </div>
    <div class="join-section">
        <h3>RIGHT JOIN</h3>
        <p>
            A <strong>RIGHT JOIN</strong> retrieves all rows from the right table and the matching rows from the left table. Rows from the right table without matches in the left table will have <strong>NULL</strong> values for the left table's columns.
        </p>
    
        <h3>Example Scenario</h3>
        <p>Consider the same two tables:</p>
        <div class="example-tables">
            <div class="table-wrapper" style="display: inline-block; width: 45%; margin-right: 5%;">
                <h4>Customers Table</h4>
                <table class="data-table compact-table">
                    <thead>
                        <tr>
                            <th>Customer ID</th>
                            <th>Customer Name</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>1</td><td>John Doe</td></tr>
                        <tr><td>2</td><td>Jane Smith</td></tr>
                    </tbody>
                </table>
            </div>
    
            <div class="table-wrapper" style="display: inline-block; width: 45%;">
                <h4>Orders Table</h4>
                <table class="data-table compact-table">
                    <thead>
                        <tr>
                            <th>Order ID</th>
                            <th>Customer ID</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>101</td><td>1</td></tr>
                        <tr><td>102</td><td>2</td></tr>
                        <tr><td>103</td><td>4</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    
        <h3>Query</h3>
        <div class="code-box">
            <pre><code>SELECT customers.customer_name, orders.order_id
    FROM customers
    RIGHT JOIN orders
    ON customers.customer_id = orders.customer_id;</code></pre>
        </div>
    
        <h3>Result</h3>
        <table class="data-table compact-table" style="width: 50%; margin: 0 auto;">
            <thead>
                <tr>
                    <th>Customer Name</th>
                    <th>Order ID</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>John Doe</td><td>101</td></tr>
                <tr><td>Jane Smith</td><td>102</td></tr>
                <tr><td>NULL</td><td>103</td></tr>
            </tbody>
        </table>
    
        <h3>Visual Representation</h3>
        <div class="joins-visual" style="text-align: center;">
            <svg viewBox="0 0 300 150" xmlns="http://www.w3.org/2000/svg" class="join-diagram" style="width: 80%; max-width: 300px; height: auto;">
                <circle cx="100" cy="75" r="60" fill="#3498db" fill-opacity="0.2" />
                <circle cx="200" cy="75" r="60" fill="#e74c3c" fill-opacity="0.6" />
                <text x="200" y="80" font-size="12" fill="#fff" text-anchor="middle">Right Rows</text>
            </svg>
            <p>
                The right circle includes all rows from the Orders table, with matches from the Customers table included in the overlap.
            </p>
        </div>
    
        <h3>Explanation</h3>
        <p>
            This query retrieves all orders, including those without matching customer records. For example:
        </p>
        <ul>
            <li>Order 101 and 102 have matching customer records (John Doe and Jane Smith).</li>
            <li>Order 103 has no matching customer, so the <strong>Customer Name</strong> is <strong>NULL</strong>.</li>
        </ul>
    </div>
    <div class="join-section">
        <h3>FULL OUTER JOIN</h3>
        <p>
            A <strong>FULL OUTER JOIN</strong> retrieves all rows from both tables. Rows without matches in the other table will have <strong>NULL</strong> values for the columns of the unmatched table.
        </p>
    
        <h3>Example Scenario</h3>
        <p>Consider the same two tables:</p>
        <div class="example-tables">
            <div class="table-wrapper" style="display: inline-block; width: 45%; margin-right: 5%;">
                <h4>Customers Table</h4>
                <table class="data-table compact-table">
                    <thead>
                        <tr>
                            <th>Customer ID</th>
                            <th>Customer Name</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>1</td><td>John Doe</td></tr>
                        <tr><td>2</td><td>Jane Smith</td></tr>
                        <tr><td>3</td><td>Emily Johnson</td></tr>
                    </tbody>
                </table>
            </div>
    
            <div class="table-wrapper" style="display: inline-block; width: 45%;">
                <h4>Orders Table</h4>
                <table class="data-table compact-table">
                    <thead>
                        <tr>
                            <th>Order ID</th>
                            <th>Customer ID</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>101</td><td>1</td></tr>
                        <tr><td>102</td><td>2</td></tr>
                        <tr><td>103</td><td>4</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    
        <h3>Query</h3>
        <div class="code-box">
            <pre><code>SELECT customers.customer_name, orders.order_id
    FROM customers
    FULL OUTER JOIN orders
    ON customers.customer_id = orders.customer_id;</code></pre>
        </div>
    
        <h3>Result</h3>
        <table class="data-table compact-table" style="width: 50%; margin: 0 auto;">
            <thead>
                <tr>
                    <th>Customer Name</th>
                    <th>Order ID</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>John Doe</td><td>101</td></tr>
                <tr><td>Jane Smith</td><td>102</td></tr>
                <tr><td>Emily Johnson</td><td>NULL</td></tr>
                <tr><td>NULL</td><td>103</td></tr>
            </tbody>
        </table>
    
        <h3>Visual Representation</h3>
        <div class="joins-visual" style="text-align: center;">
            <svg viewBox="0 0 300 150" xmlns="http://www.w3.org/2000/svg" class="join-diagram" style="width: 80%; max-width: 300px; height: auto;">
                <circle cx="100" cy="75" r="60" fill="#3498db" fill-opacity="0.4" />
                <circle cx="200" cy="75" r="60" fill="#e74c3c" fill-opacity="0.4" />
                <text x="100" y="80" font-size="12" fill="#fff" text-anchor="middle">Left Rows</text>
                <text x="200" y="80" font-size="12" fill="#fff" text-anchor="middle">Right Rows</text>
                <text x="150" y="100" font-size="12" fill="#fff" text-anchor="middle">Matching Rows</text>
            </svg>
            <p>
                Both circles represent all rows from the Customers and Orders tables. The overlapping area shows matches, while the non-overlapping areas show unmatched rows.
            </p>
        </div>
    
        <h3>Explanation</h3>
        <p>
            This query retrieves all rows from both tables:
        </p>
        <ul>
            <li>John Doe and Jane Smith have matching orders (101 and 102).</li>
            <li>Emily Johnson has no orders, so her Order ID is <strong>NULL</strong>.</li>
            <li>Order 103 has no matching customer, so the Customer Name is <strong>NULL</strong>.</li>
        </ul>
    </div>
    <div class="join-section">
        <h3>SELF JOIN</h3>
        <p>
            A <strong>SELF JOIN</strong> is a join where a table is joined with itself. It is useful for comparing rows within the same table, such as finding relationships or hierarchical structures.
        </p>
    
        <h3>Example Scenario</h3>
        <p>Consider the following Employee table:</p>
        <div class="example-tables">
            <div class="table-wrapper" style="display: inline-block; width: 50%; margin: 0 auto;">
                <h4>Employee Table</h4>
                <table class="data-table compact-table">
                    <thead>
                        <tr>
                            <th>Employee ID</th>
                            <th>Employee Name</th>
                            <th>Manager ID</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>1</td><td>John Doe</td><td>NULL</td></tr>
                        <tr><td>2</td><td>Jane Smith</td><td>1</td></tr>
                        <tr><td>3</td><td>Emily Johnson</td><td>1</td></tr>
                        <tr><td>4</td><td>Michael Brown</td><td>2</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    
        <h3>Query</h3>
        <div class="code-box">
            <pre><code>SELECT e1.employee_name AS Employee, e2.employee_name AS Manager
    FROM employee AS e1
    LEFT JOIN employee AS e2
    ON e1.manager_id = e2.employee_id;</code></pre>
        </div>
    
        <h3>Result</h3>
        <table class="data-table compact-table" style="width: 60%; margin: 0 auto;">
            <thead>
                <tr>
                    <th>Employee</th>
                    <th>Manager</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>John Doe</td><td>NULL</td></tr>
                <tr><td>Jane Smith</td><td>John Doe</td></tr>
                <tr><td>Emily Johnson</td><td>John Doe</td></tr>
                <tr><td>Michael Brown</td><td>Jane Smith</td></tr>
            </tbody>
        </table>
    
        <h3>Visual Representation</h3>
        <div class="joins-visual" style="text-align: center;">
            <svg viewBox="0 0 300 150" xmlns="http://www.w3.org/2000/svg" class="join-diagram" style="width: 80%; max-width: 300px; height: auto;">
                <circle cx="150" cy="75" r="60" fill="#3498db" fill-opacity="0.6" />
                <text x="150" y="80" font-size="12" fill="#fff" text-anchor="middle">Employee Table</text>
            </svg>
            <p>
                The single circle represents the Employee table. Each row in the table can join with other rows based on the Manager ID.
            </p>
        </div>
    
        <h3>Explanation</h3>
        <p>
            This query compares rows within the Employee table to find relationships between employees and their managers:
        </p>
        <ul>
            <li>John Doe has no manager, so the Manager column is <strong>NULL</strong>.</li>
            <li>Jane Smith and Emily Johnson report to John Doe.</li>
            <li>Michael Brown reports to Jane Smith.</li>
        </ul>
    </div>
    <div class="join-section">
        <h3>CROSS JOIN</h3>
        <p>
            A <strong>CROSS JOIN</strong> produces the Cartesian product of two tables, combining each row from the first table with every row from the second table. This join is useful in scenarios like generating combinations or exploring all possible pairings between two datasets.
        </p>
    
        <h3>Example Scenario</h3>
        <p>Consider the following two tables:</p>
        <div class="example-tables">
            <div class="table-wrapper" style="display: inline-block; width: 45%; margin-right: 5%;">
                <h4>Products Table</h4>
                <table class="data-table compact-table">
                    <thead>
                        <tr>
                            <th>Product ID</th>
                            <th>Product Name</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>1</td><td>T-Shirt</td></tr>
                        <tr><td>2</td><td>Jeans</td></tr>
                    </tbody>
                </table>
            </div>
    
            <div class="table-wrapper" style="display: inline-block; width: 45%;">
                <h4>Sizes Table</h4>
                <table class="data-table compact-table">
                    <thead>
                        <tr>
                            <th>Size ID</th>
                            <th>Size</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>1</td><td>Small</td></tr>
                        <tr><td>2</td><td>Medium</td></tr>
                        <tr><td>3</td><td>Large</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    
        <h3>Query</h3>
        <div class="code-box">
            <pre><code>SELECT products.product_name, sizes.size
    FROM products
    CROSS JOIN sizes;</code></pre>
        </div>
    
        <h3>Result</h3>
        <table class="data-table compact-table" style="width: 60%; margin: 0 auto;">
            <thead>
                <tr>
                    <th>Product Name</th>
                    <th>Size</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>T-Shirt</td><td>Small</td></tr>
                <tr><td>T-Shirt</td><td>Medium</td></tr>
                <tr><td>T-Shirt</td><td>Large</td></tr>
                <tr><td>Jeans</td><td>Small</td></tr>
                <tr><td>Jeans</td><td>Medium</td></tr>
                <tr><td>Jeans</td><td>Large</td></tr>
            </tbody>
        </table>
    
        <h3>Visual Representation</h3>
        <div class="joins-visual" style="text-align: center;">
            <svg viewBox="0 0 300 150" xmlns="http://www.w3.org/2000/svg" class="join-diagram" style="width: 80%; max-width: 300px; height: auto;">
                <circle cx="100" cy="75" r="60" fill="#3498db" fill-opacity="0.6" />
                <circle cx="200" cy="75" r="60" fill="#e74c3c" fill-opacity="0.6" />
                <text x="100" y="75" font-size="12" fill="#fff" text-anchor="middle">Products</text>
                <text x="200" y="75" font-size="12" fill="#fff" text-anchor="middle">Sizes</text>
                <line x1="100" y1="75" x2="200" y2="75" stroke="#fff" stroke-width="2" />
            </svg>
            <p>
                The Cartesian product connects every row in the <strong>Products</strong> table with every row in the <strong>Sizes</strong> table.
            </p>
        </div>
    
        <h3>Explanation</h3>
        <p>
            This query generates all possible combinations of products and sizes:
        </p>
        <ul>
            <li>A <strong>T-Shirt</strong> is available in <strong>Small</strong>, <strong>Medium</strong>, and <strong>Large</strong>.</li>
            <li><strong>Jeans</strong> are also available in all three sizes.</li>
            <li>This is useful for creating a product catalog with every size variation for each item.</li>
        </ul>
    </div>
    
</section>


<!-- Intermediate SQL Content: GROUP BY and HAVING Clauses -->
<section id="group-by">
    <h2>SQL GROUP BY: Aggregating Data</h2>
    <p>
        The <strong>GROUP BY</strong> statement is used to arrange identical data into groups. It is commonly used with aggregate functions like <code>SUM</code>, <code>COUNT</code>, <code>AVG</code>, <code>MAX</code>, and <code>MIN</code> to perform operations on groups of data.
    </p>

    <h3>Why Use GROUP BY?</h3>
    <ul>
        <li>To summarize large datasets by aggregating values.</li>
        <li>To gain insights into data patterns or trends.</li>
        <li>To organize data for reporting and analysis purposes.</li>
    </ul>

    <hr>

    <!-- Example 1 -->
    <div class="group-section">
        <h3>Example 1: Total Sales by City</h3>
        <p>Consider the following <strong>Sales</strong> table:</p>

        <div class="table-wrapper" style="width: 60%; margin: 0 auto;">
            <table class="data-table compact-table">
                <thead>
                    <tr>
                        <th>Order ID</th>
                        <th>City</th>
                        <th>Amount</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>1</td><td>New York</td><td>150</td></tr>
                    <tr><td>2</td><td>Los Angeles</td><td>200</td></tr>
                    <tr><td>3</td><td>New York</td><td>100</td></tr>
                    <tr><td>4</td><td>Chicago</td><td>300</td></tr>
                    <tr><td>5</td><td>Los Angeles</td><td>250</td></tr>
                </tbody>
            </table>
        </div>

        <h3>Query</h3>
        <div class="code-box">
            <pre><code>SELECT city, SUM(amount) AS total_sales
FROM sales
GROUP BY city;</code></pre>
        </div>

        <h3>Result</h3>
        <table class="data-table compact-table" style="width: 50%; margin: 0 auto;">
            <thead>
                <tr>
                    <th>City</th>
                    <th>Total Sales</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>New York</td><td>250</td></tr>
                <tr><td>Los Angeles</td><td>450</td></tr>
                <tr><td>Chicago</td><td>300</td></tr>
            </tbody>
        </table>

        <h3>Explanation</h3>
        <p>
            This query groups the data by the <strong>City</strong> column and calculates the total sales for each city:
        </p>
        <ul>
            <li><strong>New York</strong> has total sales of 150 + 100 = 250.</li>
            <li><strong>Los Angeles</strong> has total sales of 200 + 250 = 450.</li>
            <li><strong>Chicago</strong> has total sales of 300.</li>
        </ul>
    </div>

    <hr>

    <!-- Example 2 -->
    <div class="group-section">
        <h3>Example 2: Average Salary by Department</h3>
        <p>Consider the following <strong>Employees</strong> table:</p>

        <div class="table-wrapper" style="width: 60%; margin: 0 auto;">
            <table class="data-table compact-table">
                <thead>
                    <tr>
                        <th>Employee ID</th>
                        <th>Department</th>
                        <th>Salary</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>1</td><td>IT</td><td>80000</td></tr>
                    <tr><td>2</td><td>HR</td><td>60000</td></tr>
                    <tr><td>3</td><td>Finance</td><td>75000</td></tr>
                    <tr><td>4</td><td>IT</td><td>90000</td></tr>
                    <tr><td>5</td><td>Finance</td><td>85000</td></tr>
                </tbody>
            </table>
        </div>

        <h3>Query</h3>
        <div class="code-box">
            <pre><code>SELECT department, AVG(salary) AS average_salary
FROM employees
GROUP BY department;</code></pre>
        </div>

        <h3>Result</h3>
        <table class="data-table compact-table" style="width: 50%; margin: 0 auto;">
            <thead>
                <tr>
                    <th>Department</th>
                    <th>Average Salary</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>IT</td><td>85000</td></tr>
                <tr><td>HR</td><td>60000</td></tr>
                <tr><td>Finance</td><td>80000</td></tr>
            </tbody>
        </table>

        <h3>Explanation</h3>
        <p>
            This query groups the data by the <strong>Department</strong> column and calculates the average salary for each department:
        </p>
        <ul>
            <li>The average salary for <strong>IT</strong> is (80000 + 90000) / 2 = 85000.</li>
            <li>The average salary for <strong>HR</strong> is 60000.</li>
            <li>The average salary for <strong>Finance</strong> is (75000 + 85000) / 2 = 80000.</li>
        </ul>
    </div>
</section>

<section id="having">
    <h2>SQL HAVING CLOSE: Refining Grouped Results</h2>
    <p>
        The <strong>HAVING CLOSE</strong> statement is not a standard SQL clause. However, to refine grouped results, SQL uses the <strong>HAVING</strong> clause in conjunction with the <strong>GROUP BY</strong> statement. <strong>HAVING</strong> is used to filter grouped results based on conditions applied to aggregated values.
    </p>

    <h3>Why Use HAVING with GROUP BY?</h3>
    <ul>
        <li>To filter grouped data based on aggregated values.</li>
        <li>To exclude groups that don't meet specific criteria.</li>
        <li>To further analyze data after initial grouping and aggregation.</li>
    </ul>

    <hr>

    <!-- Example 1: Filtering Total Sales by City -->
    <div class="having-section">
        <h3>Example 1: Cities with Total Sales Over $400</h3>
        <p>Using the previous <strong>Sales</strong> table:</p>

        <div class="table-wrapper" style="width: 60%; margin: 0 auto;">
            <table class="data-table compact-table">
                <thead>
                    <tr>
                        <th>Order ID</th>
                        <th>City</th>
                        <th>Amount</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>1</td><td>New York</td><td>150</td></tr>
                    <tr><td>2</td><td>Los Angeles</td><td>200</td></tr>
                    <tr><td>3</td><td>New York</td><td>100</td></tr>
                    <tr><td>4</td><td>Chicago</td><td>300</td></tr>
                    <tr><td>5</td><td>Los Angeles</td><td>250</td></tr>
                </tbody>
            </table>
        </div>

        <h3>Query</h3>
        <div class="code-box">
            <pre><code>SELECT city, SUM(amount) AS total_sales
FROM sales
GROUP BY city
HAVING SUM(amount) > 400;</code></pre>
        </div>

        <h3>Result</h3>
        <table class="data-table compact-table" style="width: 50%; margin: 0 auto;">
            <thead>
                <tr>
                    <th>City</th>
                    <th>Total Sales</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>Los Angeles</td><td>450</td></tr>
                <tr><td>Chicago</td><td>300</td></tr>
            </tbody>
        </table>

        <h3>Explanation</h3>
        <p>
            This query groups sales by city, calculates the total sales for each, and then filters the results to only include cities with total sales exceeding $400.
        </p>
    </div>

    <hr>

    <!-- Example 2: Average Salary Threshold -->
    <div class="having-section">
        <h3>Example 2: Departments with Average Salary Over $80,000</h3>
        <p>Using the previous <strong>Employees</strong> table:</p>

        <div class="table-wrapper" style="width: 60%; margin: 0 auto;">
            <table class="data-table compact-table">
                <thead>
                    <tr>
                        <th>Employee ID</th>
                        <th>Department</th>
                        <th>Salary</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>1</td><td>IT</td><td>80000</td></tr>
                    <tr><td>2</td><td>HR</td><td>60000</td></tr>
                    <tr><td>3</td><td>Finance</td><td>75000</td></tr>
                    <tr><td>4</td><td>IT</td><td>90000</td></tr>
                    <tr><td>5</td><td>Finance</td><td>85000</td></tr>
                </tbody>
            </table>
        </div>

        <h3>Query</h3>
        <div class="code-box">
            <pre><code>SELECT department, AVG(salary) AS average_salary
                FROM employees
                GROUP BY department
                HAVING AVG(salary) > 80000;</code></pre>
                        </div>
                
                        <h3>Result</h3>
                        <table class="data-table compact-table" style="width: 50%; margin: 0 auto;">
                            <thead>
                                <tr>
                                    <th>Department</th>
                                    <th>Average Salary</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>IT</td><td>85000</td></tr>
                                <tr><td>Finance</td><td>80000</td></tr>
                            </tbody>
                        </table>
                
                        <h3>Explanation</h3>
                        <p>
                            This query groups employees by department, calculates the average salary for each, and then filters the results to only include departments with an average salary exceeding $80,000.
                        </p>
    </div>
    <div class="having-section">
        <h3>Example 3: Filtering by Multiple Conditions</h3>
        <p>Find departments with an average salary over $70,000 and fewer than 3 employees:</p>
    
        <h3>Query</h3>
        <div class="code-box">
            <pre><code>SELECT department, AVG(salary) AS average_salary, COUNT(*) AS num_employees
    FROM employees
    GROUP BY department
    HAVING AVG(salary) > 70000 AND COUNT(*) < 3;</code></pre>
        </div>
    
        <h3>Result</h3>
        <!-- Result table would be placed here, assuming there are matching records -->
    
        <h3>Explanation</h3>
        <p>
            This query demonstrates using `HAVING` with multiple conditions to refine the results further.
        </p>
    </div>
    
</section> 
                
<section id="indexing-constraints">
    <h2>Indexing</h2>
    <p>
        Indexing is a vital concept in database management that dramatically improves the performance of queries. It works by creating a smaller, more efficient data structure that helps locate rows in a table without scanning the entire dataset. This is akin to using a table of contents to quickly find a chapter in a book.
    </p>

    <h3>Why Indexing Matters</h3>
    <p>
        Without indexing, databases would have to scan each row to find the required data, leading to slow performance, especially for large datasets. Indexes optimize this process by:
    </p>
    <ul>
        <li>Reducing the number of rows scanned during a query.</li>
        <li>Improving data retrieval speed.</li>
        <li>Enhancing user experience in applications that rely on databases.</li>
    </ul>

    <h3>Types of Indexes</h3>

    <h4 class="subheading">B-Tree Index</h4>
    <p>
        <strong>Definition:</strong> A balanced tree structure that organizes data hierarchically. It maintains sorted order and allows searches, insertions, and deletions in logarithmic time.
    </p>
    <p>
        <strong>Use Case:</strong> Suitable for range queries, such as finding all employees with IDs between 100 and 200.
    </p>
    <div class="code-box">
        <pre><code>CREATE INDEX idx_employee_id ON employees (employee_id);</code></pre>
        <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
    </div>
    <p>
        <strong>Explanation:</strong> This creates a B-Tree index on the <code>employee_id</code> column, allowing the database to quickly locate specific employee IDs or process range queries efficiently.
    </p>
    <br>

    <h4 class="subheading">Hash Index</h4>
    <p>
        <strong>Definition:</strong> A data structure that uses a hash function to map keys to specific locations, providing constant-time complexity for equality searches.
    </p>
    <p>
        <strong>Use Case:</strong> Ideal for queries with equality conditions, such as <code>WHERE order_status = 'Shipped'</code>.
    </p>
    <div class="code-box">
        <pre><code>CREATE INDEX idx_order_status ON orders (order_status) USING HASH;</code></pre>
        <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
    </div>
    <p>
        <strong>Explanation:</strong> This creates a hash index on the <code>order_status</code> column, optimizing equality searches by mapping each status to a specific memory location.
    </p><br>

    <h4 class="subheading">Full-Text Index</h4>
    <p>
        <strong>Definition:</strong> An index designed for text-based searches. It enables efficient retrieval of rows containing specific words or phrases.
    </p>
    <p>
        <strong>Use Case:</strong> Searching large text fields, such as product descriptions or blog content, for specific keywords.
    </p>
    <div class="code-box">
        <pre><code>CREATE FULLTEXT INDEX idx_product_description ON products (product_description);</code></pre>
        <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
    </div>
    <p>
        <strong>Explanation:</strong> This index enables the database to perform fast searches for specific terms within the <code>product_description</code> column.
    </p><br>

    <h4 class="subheading">Composite Index</h4>
    <p>
        <strong>Definition:</strong> An index created on multiple columns to optimize queries that filter or sort using those columns.
    </p>
    <p>
        <strong>Use Case:</strong> Best for queries that use multiple conditions, such as <code>WHERE customer_name = 'John' AND customer_email = 'john@example.com'</code>.
    </p>
    <div class="code-box">
        <pre><code>CREATE INDEX idx_customer_name_email ON customers (customer_name, customer_email);</code></pre>
        <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
    </div>
    <p>
        <strong>Explanation:</strong> This composite index allows the database to efficiently process queries that involve both <code>customer_name</code> and <code>customer_email</code>.
    </p>

    <h3>Best Practices for Indexing</h3>
    <ul>
        <li>Index columns that are frequently used in <code>WHERE</code>, <code>JOIN</code>, and <code>ORDER BY</code> clauses.</li>
        <li>Avoid over-indexing, as it can slow down write operations.</li>
        <li>Regularly analyze and optimize indexes for large and dynamic datasets.</li>
    </ul>
</section>

<section id="constraints">
    <h2>Database Constraints</h2>
    <p>
        Constraints are rules enforced on data in a database to maintain accuracy, integrity, and reliability. They help define the data structure by ensuring that only valid data is stored. Let’s explore each constraint with its definition, purpose, and examples.
    </p>

    <h3>Primary Key (PK)</h3>
    <p>
        <strong>Definition:</strong> A column or set of columns that uniquely identifies each row in a table.
    </p>
    <p>
        <strong>Purpose:</strong> To ensure that each record in a table is unique and can be reliably referenced.
    </p>
    <div class="code-box">
        <pre><code>CREATE TABLE employees (
  employee_id INT PRIMARY KEY,
  employee_name VARCHAR(255)
);</code></pre>
        <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
    </div>
    <p>
        <strong>Explanation:</strong> The <code>employee_id</code> column serves as a unique identifier for each employee, ensuring no duplicate IDs exist.
    </p>

    <h3>Foreign Key (FK)</h3>
    <p>
        <strong>Definition:</strong> A column that establishes a relationship between two tables by referencing a primary key in another table.
    </p>
    <p>
        <strong>Purpose:</strong> To maintain referential integrity by ensuring that values in one table correspond to valid entries in another.
    </p>
    <div class="code-box">
        <pre><code>CREATE TABLE orders (
  order_id INT PRIMARY KEY,
  customer_id INT,
  FOREIGN KEY (customer_id) REFERENCES customers (customer_id)
);</code></pre>
        <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
    </div>
    <p>
        <strong>Explanation:</strong> This ensures that every <code>customer_id</code> in the <code>orders</code> table matches a valid <code>customer_id</code> in the <code>customers</code> table.
    </p>

    <h3>Unique Constraint</h3>
    <p>
        <strong>Definition:</strong> Ensures all values in a column are unique, preventing duplicate entries.
    </p>
    <p>
        <strong>Purpose:</strong> To maintain data uniqueness, especially for attributes like email addresses or usernames.
    </p>
    <div class="code-box">
        <pre><code>CREATE TABLE users (
  user_id INT,
  email VARCHAR(255) UNIQUE
);</code></pre>
        <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
    </div>
    <p>
        <strong>Explanation:</strong> This constraint ensures that no two users have the same email address, preserving uniqueness.
    </p>

    <h3>Not Null Constraint</h3>
    <p>
        <strong>Definition:</strong> Ensures that a column cannot contain null values.
    </p>
    <p>
        <strong>Purpose:</strong> To ensure critical fields always have a value.
    </p>
    <div class="code-box">
        <pre><code>CREATE TABLE employees (
  employee_id INT NOT NULL,
  employee_name VARCHAR(255)
);</code></pre>
        <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
    </div>
    <p>
        <strong>Explanation:</strong> This constraint ensures that the <code>employee_id</code> column always contains a value, making it mandatory.
    </p>

    <h3>Check Constraint</h3>
    <p>
        <strong>Definition:</strong> Ensures that all values in a column meet a specified condition.
    </p>
    <p>
        <strong>Purpose:</strong> To enforce domain-specific rules for data validation.
    </p>
    <div class="code-box">
        <pre><code>CREATE TABLE employees (
  employee_id INT,
  age INT CHECK (age >= 18)
);</code></pre>
        <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
    </div>
    <p>
        <strong>Explanation:</strong> This constraint ensures that the <code>age</code> column only accepts values of 18 or older, enforcing a minimum age requirement.
    </p>

    <h3>Default Constraint</h3>
    <p>
        <strong>Definition:</strong> Assigns a default value to a column if no value is provided during an insert operation.
    </p>
    <p>
        <strong>Purpose:</strong> To ensure columns have meaningful default values, reducing the need for explicit input.
    </p>
    <div class="code-box">
        <pre><code>CREATE TABLE products (
  product_id INT,
  status VARCHAR(50) DEFAULT 'Available'
);</code></pre>
        <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
    </div>
    <p>
        <strong>Explanation:</strong> The <code>status</code> column will automatically have the value <code>'Available'</code> if no other value is provided.
    </p>
</section>

<!-- Intermediate SQL Content: Views and Stored Procedures -->
<section id="views-stored-procedures">
    <h2>Views and Stored Procedures</h2>

    <h3>Creating and Using Views</h3>
    <p>
        <strong>Definition:</strong> A view is a virtual table that provides a simplified and abstracted representation of the data from one or more tables. It does not store data itself but dynamically generates the result based on the underlying query.
    </p>
    <p>
        <strong>Purpose:</strong>
        <ul>
            <li>Simplify complex queries by encapsulating them in a reusable structure.</li>
            <li>Provide data abstraction, hiding the complexity of the underlying tables.</li>
            <li>Enhance security by restricting direct access to sensitive data.</li>
        </ul>
    </p>

    <h4>Syntax:</h4>
    <div class="code-box">
        <pre><code>CREATE VIEW view_name AS
SELECT column1, column2, ...
FROM table_name
WHERE condition;</code></pre>
        <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
    </div>

    <h4>Examples of Views</h4>

    <h5>1. View for High-Salary Employees</h5>
    <div class="code-box">
        <pre><code>CREATE VIEW high_salary_employees AS
SELECT employee_name, salary, department
FROM employees
WHERE salary > 50000;</code></pre>
        <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
    </div>
    <p>
        <strong>Explanation:</strong> This view filters employees earning more than 50,000, simplifying queries to retrieve high-salary employee data.
    </p>

    <h5>2. View for Customer Spending</h5>
    <div class="code-box">
        <pre><code>CREATE VIEW customer_spending AS
SELECT customer_name, SUM(total_amount) AS total_spent
FROM customers
JOIN orders ON customers.customer_id = orders.customer_id
GROUP BY customer_name;</code></pre>
        <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
    </div>
    <p>
        <strong>Explanation:</strong> This view aggregates total spending for each customer, enabling quick analysis of customer purchasing behavior.
    </p>

    <h5>3. View for Low Stock Products</h5>
    <div class="code-box">
        <pre><code>CREATE VIEW low_stock_products AS
SELECT product_name, quantity_in_stock
FROM products
WHERE quantity_in_stock < 10;</code></pre>
        <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
    </div>
    <p>
        <strong>Explanation:</strong> This view identifies products with low inventory, aiding inventory management.
    </p>

    <h3>Creating and Executing Stored Procedures</h3>
    <p>
        <strong>Definition:</strong> A stored procedure is a reusable block of SQL code that performs a specific task. It is stored in the database and can be executed with a single call.
    </p>
    <p>
        <strong>Purpose:</strong>
        <ul>
            <li>Enhance database security by controlling data access through predefined operations.</li>
            <li>Reduce code duplication and improve maintainability.</li>
            <li>Optimize performance by pre-compiling and reusing SQL logic.</li>
        </ul>
    </p>

    <h4>Syntax:</h4>
    <div class="code-box">
        <pre><code>CREATE PROCEDURE procedure_name
BEGIN
    SQL statements;
END;</code></pre>
        <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
    </div>

    <h4>Examples of Stored Procedures</h4>

    <h5>1. Insert New Employee</h5>
    <div class="code-box">
        <pre><code>CREATE PROCEDURE sp_insert_employee (
  IN employee_name VARCHAR(255),
  IN salary DECIMAL(10, 2),
  IN department VARCHAR(255)
)
BEGIN
  INSERT INTO employees (employee_name, salary, department)
  VALUES (employee_name, salary, department);
END;</code></pre>
        <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
    </div>
    <p>
        <strong>Explanation:</strong> This procedure simplifies adding new employees by encapsulating the insert logic.
    </p>

    <h5>2. Update Order Status</h5>
    <div class="code-box">
        <pre><code>CREATE PROCEDURE sp_update_order_status (
  IN order_id INT,
  IN new_status VARCHAR(255)
)
BEGIN
  UPDATE orders
  SET status = new_status
  WHERE order_id = order_id;
END;</code></pre>
        <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
    </div>
    <p>
        <strong>Explanation:</strong> This procedure streamlines updating order statuses, reducing repetitive query writing.
    </p>

    <h5>3. Generate Sales Report</h5>
    <div class="code-box">
        <pre><code>CREATE PROCEDURE sp_generate_sales_report (
  IN start_date DATE,
  IN end_date DATE
)
BEGIN
  SELECT *
  FROM orders
  WHERE order_date BETWEEN start_date AND end_date;
END;</code></pre>
        <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
    </div>
    <p>
        <strong>Explanation:</strong> This procedure generates a sales report for a specified date range, simplifying report creation.
    </p>

    <h5>4. Delete Old Records</h5>
    <div class="code-box">
        <pre><code>CREATE PROCEDURE sp_delete_old_records (
  IN cutoff_date DATE
)
BEGIN
  DELETE FROM logs
  WHERE log_date < cutoff_date;
END;</code></pre>
        <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
    </div>
    <p>
        <strong>Explanation:</strong> This procedure helps maintain database performance by removing outdated records.
    </p>

    <h3>Key Takeaways</h3>
    <ul>
        <li><strong>Views:</strong> Provide a simplified and secure way to access and manipulate data without modifying the underlying tables.</li>
        <li><strong>Stored Procedures:</strong> Encapsulate reusable logic, improving efficiency and security in database operations.</li>
    </ul>
</section>

<section id="database-design">
    <h2>Designing Databases with Ease</h2>

    <h3>Introduction to Database Design</h3>
    <p>
        <strong>Definition:</strong> Database design is the process of structuring and organizing data to meet business requirements efficiently. It involves creating a conceptual, logical, and physical representation of a database.
    </p>
    <p>
        <strong>Goals:</strong>
        <ul>
            <li>Ensure data consistency and accuracy.</li>
            <li>Minimize redundancy and optimize storage.</li>
            <li>Improve data integrity and scalability.</li>
        </ul>
    </p>
    <p>
        <strong>Key Considerations:</strong>
        <ul>
            <li><strong>Data Requirements:</strong> Identify the data necessary to support the business processes.</li>
            <li><strong>Data Relationships:</strong> Define how data entities interact with each other.</li>
            <li><strong>Data Constraints:</strong> Establish rules to maintain data consistency and integrity.</li>
        </ul>
    </p>

    <h3>Entity-Relationship Modeling (ERM)</h3>
    <p>
        <strong>Definition:</strong> ERM is a methodology for designing databases by visually representing entities, their attributes, and the relationships between them.
    </p>
    <p>
        <strong>Key Components:</strong>
        <ul>
            <li><strong>Entities:</strong> Represent tables or objects in the database (e.g., Customers, Orders).</li>
            <li><strong>Attributes:</strong> Define the properties or characteristics of entities (e.g., Customer Name, Order Date).</li>
            <li><strong>Relationships:</strong> Show how entities are related to one another (e.g., One-to-Many, Many-to-Many).
                <ul>
                    <li><strong>One-to-Many (1:N):</strong> A single entity in one table is related to multiple entities in another.</li>
                    <li><strong>Many-to-Many (M:N):</strong> Multiple entities in one table are related to multiple entities in another.</li>
                    <li><strong>One-to-One (1:1):</strong> A single entity in one table is related to a single entity in another.</li>
                </ul>
            </li>
        </ul>
    </p>
    <p>
        <strong>Example: ERM Diagram for an E-commerce Database</strong>
        <ul>
            <li><strong>Entities:</strong>
                <ul>
                    <li><strong>Customers:</strong> Attributes: Customer ID, Name, Email, Address.</li>
                    <li><strong>Orders:</strong> Attributes: Order ID, Customer ID, Order Date, Total Amount.</li>
                    <li><strong>Products:</strong> Attributes: Product ID, Name, Description, Price.</li>
                </ul>
            </li>
            <li><strong>Relationships:</strong>
                <ul>
                    <li>Customers (1:N) Orders</li>
                    <li>Orders (M:N) Products</li>
                </ul>
            </li>
        </ul>
    </p>

    <h3>Normalization</h3>
    <p>
        <strong>Definition:</strong> Normalization is the process of organizing data in a database to reduce redundancy and improve integrity by dividing data into multiple related tables.
    </p>
    <p>
        <strong>Normalization Forms:</strong>
        <ol>
            <li><strong>First Normal Form (1NF):</strong> Ensures that each column contains atomic (indivisible) values.</li>
            <li><strong>Second Normal Form (2NF):</strong> Eliminates partial dependency, ensuring all non-key attributes depend on the entire primary key.</li>
            <li><strong>Third Normal Form (3NF):</strong> Removes transitive dependency, ensuring that non-key attributes depend only on the primary key.</li>
        </ol>
    </p>

    <h4>First Normal Form (1NF)</h4>
    <p>
        <strong>Example:</strong>
        <div class="code-box">
            <pre><code>Before 1NF:
Customers: Customer ID, Name, Phone Numbers (123-456-7890, 987-654-3210)</code></pre>
            <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
        </div>
        <div class="code-box">
            <pre><code>After 1NF:
Customers: Customer ID, Name
Phone Numbers: Customer ID, Phone Number</code></pre>
            <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
        </div>
    </p>

    <h4>Second Normal Form (2NF)</h4>
    <p>
        <strong>Example:</strong>
        <div class="code-box">
            <pre><code>Before 2NF:
Orders: Order ID, Customer ID, Order Date, Customer Name</code></pre>
            <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
        </div>
        <div class="code-box">
            <pre><code>After 2NF:
Orders: Order ID, Customer ID, Order Date
Customers: Customer ID, Customer Name</code></pre>
            <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
        </div>
    </p>

    <h4>Third Normal Form (3NF)</h4>
    <p>
        <strong>Example:</strong>
        <div class="code-box">
            <pre><code>Before 3NF:
Products: Product ID, Name, Description, Supplier Name, Supplier Address</code></pre>
            <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
        </div>
        <div class="code-box">
            <pre><code>After 3NF:
Products: Product ID, Name, Description, Supplier ID
Suppliers: Supplier ID, Supplier Name, Supplier Address</code></pre>
            <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
        </div>
    </p>

    <h3>Key Takeaways</h3>
    <ul>
        <li><strong>Database Design:</strong> Focus on identifying data requirements, relationships, and constraints.</li>
        <li><strong>Entity-Relationship Modeling:</strong> Use ER diagrams to visualize database structures.</li>
        <li><strong>Normalization:</strong> Apply 1NF, 2NF, and 3NF to minimize redundancy and improve data integrity.</li>
    </ul>
</section>

<section id="subqueries">
    <h2>Understanding Subqueries</h2>
    <p>
        <strong>Definition:</strong> A subquery is a query nested inside another query. It helps in breaking down complex SQL problems into smaller, manageable components by providing intermediate results that can be used by the outer query.
    </p>
    <p>
        <strong>Purpose:</strong>
        <ul>
            <li>Simplify complex SQL queries.</li>
            <li>Filter or refine data based on dynamic conditions.</li>
            <li>Enable advanced data analysis by combining multiple query layers.</li>
        </ul>
    </p>

    <h3>Types of Subqueries</h3>
    <ol>
        <li><strong>Single-Row Subquery:</strong> Returns a single row with a single value.</li>
        <li><strong>Multiple-Row Subquery:</strong> Returns multiple rows with one or more columns.</li>
        <li><strong>Correlated Subquery:</strong> Depends on the outer query for its values.</li>
    </ol>

    <h3>Single-Row Subquery</h3>
    <p>
        <strong>Definition:</strong> A subquery that returns exactly one row and one column, which can be used as a value in the outer query.
    </p>
    <p>
        <strong>Examples:</strong>
        <div class="code-box">
            <pre><code>-- Find the employee with the highest salary
SELECT *
FROM employees
WHERE salary = (
  SELECT MAX(salary)
  FROM employees
);</code></pre>
            <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
        </div>
        <div class="code-box">
            <pre><code>-- Get the average order value for customers in New York
SELECT *
FROM customers
WHERE customer_id = (
  SELECT customer_id
  FROM orders
  WHERE total_amount = (
    SELECT AVG(total_amount)
    FROM orders
    WHERE customer_state = 'NY'
  )
);</code></pre>
            <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
        </div>
    </p>

    <h3>Multiple-Row Subquery</h3>
    <p>
        <strong>Definition:</strong> A subquery that returns multiple rows and can be used with operators like <code>IN</code>, <code>ANY</code>, or <code>ALL</code> in the outer query.
    </p>
    <p>
        <strong>Examples:</strong>
        <div class="code-box">
            <pre><code>-- Find all employees with salaries above the average
SELECT *
FROM employees
WHERE salary > (
  SELECT AVG(salary)
  FROM employees
);</code></pre>
            <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
        </div>
        <div class="code-box">
            <pre><code>-- Get all orders with total amounts above $100
SELECT *
FROM orders
WHERE total_amount > (
  SELECT AVG(total_amount)
  FROM orders
);</code></pre>
            <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
        </div>
    </p>

    <h3>Correlated Subqueries</h3>
    <p>
        <strong>Definition:</strong> A subquery that uses values from the outer query. It is evaluated once for each row processed by the outer query.
    </p>
    <p>
        <strong>Examples:</strong>
        <div class="code-box">
            <pre><code>-- Find employees earning more than the average salary in their department
SELECT *
FROM employees e
WHERE salary > (
  SELECT AVG(salary)
  FROM employees
  WHERE department = e.department
);</code></pre>
            <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
        </div>
        <div class="code-box">
            <pre><code>-- Get orders with total amounts above the average for each customer
SELECT *
FROM orders o
WHERE total_amount > (
  SELECT AVG(total_amount)
  FROM orders
  WHERE customer_id = o.customer_id
);</code></pre>
            <button class="copy-button" onclick="copyCode(this)"><i class="fas fa-copy"></i></button>
        </div>
    </p>

    <h3>Best Practices for Using Subqueries</h3>
    <ul>
        <li>Use subqueries for clarity when breaking down complex queries into smaller components.</li>
        <li>Prefer JOINs over subqueries when performance is critical, as JOINs are often faster.</li>
        <li>Optimize correlated subqueries to avoid performance bottlenecks in large datasets.</li>
    </ul>

    <h3>Key Takeaways</h3>
    <ul>
        <li><strong>Single-Row Subquery:</strong> Returns a single value for comparison or filtering.</li>
        <li><strong>Multiple-Row Subquery:</strong> Returns a set of values used with operators like <code>IN</code> or <code>ALL</code>.</li>
        <li><strong>Correlated Subquery:</strong> Evaluates dynamically for each row of the outer query.</li>
    </ul>
</section>

<section class="padding-lg" id="customer-insights">
    <h2 class="font-weight-bold margin-lg text-align-center">Unlocking the Value of Your Customer Base: A Deep Dive into Purchase Behavior Analysis</h2>

    <div class="code-box margin-lg">
        <h3 class="header">The Query: Identifying High-Value Customers</h3>
        <pre>
            <code>
SELECT 
    customers.customer_name,
    SUM(orders.total_amount) AS total_spent,
    AVG(orders.total_amount) AS average_order_value
FROM 
    customers
    JOIN orders ON customers.customer_id = orders.customer_id
WHERE 
    orders.order_date >= '2022-01-01'
GROUP BY 
    customers.customer_name
HAVING 
    SUM(orders.total_amount) > 1000
ORDER BY 
    total_spent DESC;
            </code>
        </pre>
    </div>

    <div class="padding-md background-color-f9f9f9 border-radius border-1px-solid-dde0e3 box-shadow">
        <h3>Breaking Down the Query:</h3>
        <ul>
            <li><strong>SELECT:</strong> Fetches the customer's name, their total spending, and average order value.</li>
            <li><strong>FROM & JOIN:</strong> Combines customer data with their respective orders based on customer IDs.</li>
            <li><strong>WHERE:</strong> Filters orders made from the start of 2022 onwards.</li>
            <li><strong>GROUP BY:</strong> Groups data by customer name for aggregate calculations.</li>
            <li><strong>HAVING:</strong> Filters customers whose total spending exceeds $1000.</li>
            <li><strong>ORDER BY:</strong> Sorts the results by total spending in descending order.</li>
        </ul>
    </div>

    <div class="padding-md background-color-f9f9f9 border-radius border-1px-solid-dde0e3 box-shadow margin-top-md">
        <h3>Unpacking the Insights:</h3>
        <ul>
            <li><strong>Total Spent (total_spent):</strong> Shows the cumulative value each customer has contributed since 2022.</li>
            <li><strong>Average Order Value (average_order_value):</strong> Provides insight into the typical order size of high-value customers.</li>
        </ul>
    </div>

    <div class="padding-lg">
        <h3 class="font-weight-bold text-align-center">Advanced Analysis for Targeted Marketing</h3>

        <div class="data-table margin-lg">
            <table>
                <thead>
                    <tr>
                        <th>Analysis</th>
                        <th>Query Adjustment</th>
                        <th>Insight</th>
                        <th>Marketing Strategy</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Purchase Frequency Analysis</td>
                        <td>Add COUNT(orders.order_id) AS number_of_orders to the SELECT clause.</td>
                        <td>Understand how often high-value customers shop.</td>
                        <td>Offer loyalty rewards to frequent shoppers to increase retention.</td>
                    </tr>
                    <tr>
                        <td>Product Preference Analysis</td>
                        <td>Join with the order_items table and SELECT product_category.</td>
                        <td>Identify top product categories for high-value customers.</td>
                        <td>Customize promotions and recommendations for these categories.</td>
                    </tr>
                    <tr>
                        <td>Geographic Segmentation</td>
                        <td>Include customers.customer_location in the SELECT clause.</td>
                        <td>Analyze the regional distribution of high-value customers.</td>
                        <td>Develop location-specific campaigns or collaborations.</td>
                    </tr>
                    <tr>
                        <td>Seasonal Purchase Trends</td>
                        <td>Group data by order_date to identify seasonal spikes.</td>
                        <td>Uncover key periods of customer spending.</td>
                        <td>Plan seasonal promotions or exclusive sales events.</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="padding-md background-color-f9f9f9 border-radius border-1px-solid-dde0e3 box-shadow margin-top-md">
            <h3>Next Steps:</h3>
            <ul>
                <li><strong>Automate Reporting:</strong> Schedule queries to run monthly or quarterly for continuous insights.</li>
                <li><strong>Integrate Insights:</strong> Feed analysis into marketing tools for personalized outreach.</li>
                <li><strong>Monitor Effectiveness:</strong> Regularly evaluate the success of marketing campaigns using these insights.</li>
            </ul>
        </div>

        <div class="text-align-center margin-top-lg padding-bottom-lg">
            <button class="copy-button" onclick="copyQueryToClipboard()">Copy Query to Clipboard</button>
        </div>
    </div>
</section>

    
<section id="user-contributions">
    <h3>Submit Your SQL Queries or Challenges</h3>
    <p>Have an interesting SQL query or challenge? Share it with us, and we might feature it on our site with credits to you!</p>

    <!-- Submission Form -->
    <form id="contribution-form" class="contribution-form">
        <label for="name">Your Name:</label>
        <input type="text" id="name" name="name" placeholder="Enter your name" required>

        <label for="email">Your Email:</label>
        <input type="email" id="email" name="email" placeholder="Enter your email" required>

        <label for="query">SQL Query/Challenge:</label>
        <textarea id="query" name="query" placeholder="Enter your SQL query or challenge here" rows="5" required></textarea>

        <button type="submit" class="btn-submit">Submit</button>
    </form>

    <!-- Featured Contributions -->
    <div id="featured-contributions" class="featured-contributions">
        <h3>Featured User Submissions</h3>
        <ul>
            <li><strong>John Doe:</strong> <em>"Write a query to find the top 5 highest-paid employees."</em></li>
            <li><strong>Jane Smith:</strong> <em>"Optimize a query to retrieve customer orders within the last 30 days."</em></li>
        </ul>
    </div>
    <style>
        /* User Contributions Section */
    #user-contributions {
        background-color: #f9f9f9;
        border-radius: var(--border-radius);
        box-shadow: var(--box-shadow);
        padding: var(--spacing-lg);
    }

    #user-contributions h3, #user-contributions h3 {
        color: var(--secondary-color);
        text-align: center;
        margin-bottom: var(--spacing-md);
    }

    .contribution-form {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-md);
        max-width: 500px;
        margin: 0 auto;
    }

    .contribution-form label {
        font-weight: bold;
        color: var(--primary-color);
    }

    .contribution-form input, .contribution-form textarea {
        width: 100%;
        padding: var(--spacing-sm);
        border: 1px solid #ddd;
        border-radius: var(--border-radius);
        box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        font-size: 1em;
    }

    .contribution-form button {
        background-color: var(--secondary-color);
        color: #fff;
        border: none;
        padding: var(--spacing-sm) var(--spacing-md);
        border-radius: var(--border-radius);
        cursor: pointer;
        transition: var(--transition);
    }

    .contribution-form button:hover {
        background-color: var(--accent-color);
    }

    .featured-contributions ul {
        list-style: none;
        padding: 0;
        margin: var(--spacing-lg) 0;
    }

    .featured-contributions ul li {
        margin-bottom: var(--spacing-sm);
        padding-left: 10px;
        position: relative;
    }

    .featured-contributions ul li::before {
        content: "★";
        position: absolute;
        left: -15px;
        color: var(--accent-color);
    }

    </style>

    <script>
        document.getElementById("contribution-form").addEventListener("submit", function(e) {
            e.preventDefault();
        
            // Get form values
            const name = document.getElementById("name").value;
            const query = document.getElementById("query").value;
        
            // Add the contribution to the featured list
            const contributions = document.getElementById("featured-contributions").querySelector("ul");
            const newContribution = document.createElement("li");
            newContribution.innerHTML = `<strong>${name}:</strong> <em>"${query}"</em>`;
            contributions.appendChild(newContribution);
        
            // Reset form
            this.reset();
        
            // Alert the user (optional)
            alert("Thank you for your contribution!");
        });
    </script>

</section>


</div>

<footer class="footer">
    <p class="paragraph">Copyright 2023 TechyVia. All rights reserved.</p>
  </footer>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
  <script src="script.js"></script>
</body>
</html>